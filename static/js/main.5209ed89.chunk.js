(this["webpackJsonpapod-cat"]=this["webpackJsonpapod-cat"]||[]).push([[0],{20:function(e,t,a){e.exports=a(31)},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),l=a.n(r),o=(a(25),a(2)),i=function(e,t,a){return e+"-"+t+"-"+a},u=function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var n=e.getDate();return i(t,a,n=n<10?"0"+n:n)},s=function(e,t){for(var a=[],n=function(e,t){var a=new Date;return e===a.getMonth()+1&&t===a.getFullYear()}(e,t)?(new Date).getDate():new Date(t,e,0).getDate();n>0;n--)a.push(i(t,e,n));return a},m=function(e){return fetch("https://api.nasa.gov/planetary/apod?api_key=".concat("nfnKxO4IpgdmkAVsGG0UvQ8SkbSXdmaFvKknIfjG","&date=").concat(e)).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=new Error(e.msg||"Somthing went wrong");throw t.data=e,t}))}))},d=function(){return c.a.createElement("div",{className:"loader"},c.a.createElement("div",{className:"animation-container"},c.a.createElement("div",{className:"animation-group"},c.a.createElement("span",{className:"loader-component"}),c.a.createElement("span",{className:"loader-component"}),c.a.createElement("span",{className:"loader-component"}),c.a.createElement("span",{className:"loader-component"}))))},f=a(8),p=function(e){var t=e.imgUrl,a=e.title,n=e.description,r=e.hidden,l=e.onLoad;return c.a.createElement("div",{className:Object(f.a)("apod-container",{hidden:r})},c.a.createElement("header",null,c.a.createElement("h2",{className:"title"},a)),c.a.createElement("div",{className:"picture-container"},c.a.createElement("img",{src:t,alt:a,className:"picture",onLoad:l}),c.a.createElement("div",{className:"description-container"},c.a.createElement("p",null,n))))},h=function(e){var t=e.message;return c.a.createElement("div",{className:"error"},c.a.createElement("span",null,t))},g=a(9),E=["January","February","March","April","May","June","July","August","September","October","November","December"],v="1995",b="6",j="16",O=function(e){var t=e.date,a=e.onChange;return c.a.createElement("div",{className:"picker-container"},c.a.createElement("input",{name:"picker",className:"picker date-picker",type:"date",value:t,onChange:function(e){return a(e.target.value)},max:u(new Date),min:u(new Date(v,b,j))}))},w=function(){var e=Object(n.useState)((function(){return window.localStorage.getItem("date")||u(new Date)})),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),i=Object(o.a)(l,2),s=i[0],f=i[1],E=Object(n.useState)(!0),v=Object(o.a)(E,2),b=v[0],j=v[1],w=Object(n.useState)(!0),N=Object(o.a)(w,2),S=N[0],k=N[1],y=Object(n.useState)(null),D=Object(o.a)(y,2),C=D[0],M=D[1];return Object(n.useEffect)((function(){return window.localStorage.setItem("date",a)}),[a]),Object(n.useEffect)((function(){j(!0),k(!0),M(null),m(a).then((function(e){if("image"!==e.media_type)throw new Error("Oops. The day has no image.");f(e)})).catch((function(e){M(e),k(!1)})).finally((function(){return j(!1)}))}),[a]),c.a.createElement(c.a.Fragment,null,c.a.createElement("header",{className:"header"},c.a.createElement("h1",{className:"title"},"Astronomy Picture of the Day"),c.a.createElement(g.b,{className:"nav-link",exact:!0,to:"/catalog"},"Go to catalog")),c.a.createElement(O,{date:a,onChange:r}),c.a.createElement("section",{className:"content-section"},S&&c.a.createElement(d,null),!b&&!C&&c.a.createElement(p,{imgUrl:s.url,title:s.title,description:s.explanation,hidden:S,onLoad:function(){return k(!1)}}),C&&c.a.createElement(h,{message:C.message})))},N=a(1),S=a(19),k=function(e){var t=e.imgUrl,a=e.date,r=e.title,l=e.onClick,i=Object(n.useState)(!0),u=Object(o.a)(i,2),s=u[0],m=u[1];return c.a.createElement("div",{className:"preview",onClick:l},s&&c.a.createElement(d,null),c.a.createElement("img",{className:Object(f.a)("preview-img",{hidden:s}),src:t,alt:r,onLoad:function(){return m(!1)}}),c.a.createElement("span",{className:"preview-title"},r),c.a.createElement("span",{className:"preview-date"},a))},y=function(e){var t=e.apods,a=e.onClick;return c.a.createElement("div",{className:"apods-list"},t.map((function(e){return c.a.createElement(k,{imgUrl:e.url,title:e.title,date:e.date,key:e.date,onClick:function(){return a(e.date)}})})))},D=function(e){var t=e.onDismiss,a=e.children;return c.a.createElement("div",{className:"window",onClick:t},a)},C=function(e){var t=e.date,a=e.onDismiss,r=Object(n.useState)(null),l=Object(o.a)(r,2),i=l[0],u=l[1],s=Object(n.useState)(!0),m=Object(o.a)(s,2),p=m[0],h=m[1];return Object(n.useEffect)((function(){fetch("https://api.nasa.gov/planetary/apod?api_key=".concat("nfnKxO4IpgdmkAVsGG0UvQ8SkbSXdmaFvKknIfjG","&date=").concat(t,"&hd=true")).then((function(e){if(200===e.status)return e.json();throw Error()})).then(u).catch((function(){return alert("Something went wrong. Try to pick another date.")}))}),[t]),c.a.createElement(D,{onDismiss:a},p&&c.a.createElement(d,null),i&&c.a.createElement("img",{src:i.hdurl,alt:i.title,className:Object(f.a)("modal-image",{hidden:p},{appearing:!p}),onLoad:function(){return h(!1)}}))},M=function(e){var t=e.value,a=e.onSelect,n=e.disableMonths;return c.a.createElement("select",{value:t,onChange:function(e){return a(+e.target.value)},className:"picker"},E.map((function(e){return c.a.createElement("option",{value:E.indexOf(e)+1,key:e,disabled:n&&E.indexOf(e)>(new Date).getMonth()},e)})))},I=function(e){var t=e.value,a=e.onSelect,n=e.thisYear,r=e.disableYear,l=function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}(v,n);return c.a.createElement("select",{value:t,onChange:function(e){return a(+e.target.value)},className:"picker"},l.map((function(e){return c.a.createElement("option",{value:e,key:e,disabled:r&&e===n},e)})))},Y=function(e){var t=e.month,a=e.year,r=e.onMonthChange,l=e.onYearChange,i=Object(n.useState)(!1),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(n.useState)(!1),f=Object(o.a)(d,2),p=f[0],h=f[1];return Object(n.useEffect)((function(){var e=new Date;a===e.getFullYear()?m(!0):m(!1),t>e.getMonth()+1?h(!0):h(!1)}),[t,a]),c.a.createElement("div",{className:"picker-container"},c.a.createElement(M,{value:t,onSelect:r,disableMonths:s}),c.a.createElement(I,{value:a,onSelect:l,disableYear:p,thisYear:(new Date).getFullYear()}))},x=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),i=Object(o.a)(l,2),u=i[0],f=i[1],p=Object(n.useState)((function(){return+window.localStorage.getItem("month")||(new Date).getMonth()+1})),h=Object(o.a)(p,2),E=h[0],v=h[1],b=Object(n.useState)((function(){return+window.localStorage.getItem("year")||(new Date).getFullYear()})),j=Object(o.a)(b,2),O=j[0],w=j[1],N=Object(n.useState)(null),k=Object(o.a)(N,2),D=k[0],M=k[1],I=Object(n.useState)(!1),x=Object(o.a)(I,2),F=x[0],G=x[1];Object(n.useEffect)((function(){window.localStorage.setItem("month",E),window.localStorage.setItem("year",O)}),[E,O]),Object(n.useEffect)((function(){var e,t=s(E,O),a=[],n=Object(S.a)(t);try{for(n.s();!(e=n.n()).done;){var c=e.value;a.push(m(c).then((function(e){return e.url.match(/\.(gif|jpe?g|png)$/)?e:null})).catch((function(e){return console.log(e)})))}}catch(l){n.e(l)}finally{n.f()}Promise.all(a).then((function(e){return r(e.filter((function(e){return!!e})))})).then((function(){return f(!1)}))}),[E,O]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",{className:"header"},c.a.createElement("h1",{className:"title"},"APoD catalog"),c.a.createElement(g.b,{className:"nav-link",exact:!0,to:"/"},"Return to apod")),c.a.createElement(Y,{month:E,year:O,onMonthChange:v,onYearChange:w}),c.a.createElement("section",{className:"content-section"},u?c.a.createElement(d,null):c.a.createElement(y,{apods:a,onClick:function(e){M(e),G(!0)}})),F&&c.a.createElement(C,{date:D,onDismiss:function(){return G(!1)}}))},F=function(){return c.a.createElement(g.a,{basename:"/"},c.a.createElement("div",{className:"container"},c.a.createElement(N.c,null,c.a.createElement(N.a,{path:"/catalog",component:x}),c.a.createElement(N.a,{exact:!0,path:"/",component:w}))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(F,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.5209ed89.chunk.js.map